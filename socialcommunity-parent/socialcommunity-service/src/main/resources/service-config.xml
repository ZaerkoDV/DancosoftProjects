<?xml version="1.0" encoding="UTF-8"?>
<beans:beans
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
	xmlns:mvc="http://www.springframework.org/schema/mvc"
	xmlns:context="http://www.springframework.org/schema/context" 
	xmlns:tx="http://www.springframework.org/schema/tx"
	xmlns:beans="http://www.springframework.org/schema/beans"

	xsi:schemaLocation="
		http://www.springframework.org/schema/mvc 
	    http://www.springframework.org/schema/mvc/spring-mvc.xsd
	    http://www.springframework.org/schema/context 
	    http://www.springframework.org/schema/context/spring-context-3.2.xsd
	    http://www.springframework.org/schema/tx
		http://www.springframework.org/schema/tx/spring-tx-4.0.xsd 
		http://www.springframework.org/schema/beans
		http://www.springframework.org/schema/beans/spring-beans-3.0.xsd">

	<mvc:annotation-driven/>
	
	<mvc:resources mapping="/resources/**" location="/resources/" />

	<beans:import resource="classpath*:/dao-config.xml"/>
	
									<!--velocity email sender  -->
									
	<beans:bean id="mailSender" class="org.springframework.mail.javamail.JavaMailSenderImpl">
		<beans:property name="host" value="smtp.mail.ru" />
		<beans:property name="port" value="587" />
		<beans:property name="username" value="zaerko1991@mail.ru" />
		<beans:property name="password" value="AragorN" />
		<beans:property name="javaMailProperties">
		   <beans:props>
				 <!--<beans:prop key="mail.debug">true</beans:prop> -->
				 <beans:prop key="mail.smtp.auth">true</beans:prop>
				 <beans:prop key="mail.smtp.starttls.enable">true</beans:prop>
				 <beans:prop key="mail.mime.charset">UTF-8</beans:prop>
				 <beans:prop key="mail.smtp.ssl.enable">false</beans:prop>
				 <beans:prop key="mail.transport.protocol">smtp</beans:prop>
		   </beans:props>
		</beans:property>
	</beans:bean>
		
	<beans:bean id="emailSender" class="com.dancosoft.socialcommunity.service.support.email.EmailSender">
		 <beans:property name="mailSender" ref="mailSender" />
		 <beans:property name="velocityEngine" ref="velocityEngine"/>
    </beans:bean>
		
	<beans:bean id="velocityEngine" class="org.springframework.ui.velocity.VelocityEngineFactoryBean">
		<beans:property name="velocityProperties">
		    <beans:props>
		        <beans:prop key="resource.loader">class</beans:prop>
		         <beans:prop key="class.resource.loader.class">
		                org.apache.velocity.runtime.resource.loader.ClasspathResourceLoader
		         </beans:prop>
		    </beans:props>
		 </beans:property>
	</beans:bean>

										<!-- service beans -->
	
	<beans:bean id="commonEntityService" class="com.dancosoft.socialcommunity.service.impl.CommonEntityServiceImpl">
		<beans:property name="commonEntityDAO" ref="commonEntityDAO"></beans:property>
	</beans:bean>

	<beans:bean id="accountForumService" class="com.dancosoft.socialcommunity.service.impl.AccountForumServiceImpl">
		<beans:property name="accountForumDAO" ref="accountForumDAO"></beans:property>
	</beans:bean>

	<beans:bean id="accountGroupHistoryService" class="com.dancosoft.socialcommunity.service.impl.AccountGroupHistoryServiceImpl">
		<beans:property name="accountGroupHistoryDAO" ref="accountGroupHistoryDAO"></beans:property>
	</beans:bean>
	
	<beans:bean id="accountGroupService" class="com.dancosoft.socialcommunity.service.impl.AccountGroupServiceImpl">
		<beans:property name="accountGroupDAO" ref="accountGroupDAO"></beans:property>
	</beans:bean>
	
	<beans:bean id="accountHistoryService" class="com.dancosoft.socialcommunity.service.impl.AccountHistoryServiceImpl">
		<beans:property name="accountHistoryDAO" ref="accountHistoryDAO"></beans:property>
	</beans:bean>
	
	<beans:bean id="accountService" class="com.dancosoft.socialcommunity.service.impl.AccountServiceImpl">
		<beans:property name="accountDAO" ref="accountDAO"></beans:property>
	</beans:bean>
	
	<beans:bean id="cityService" class="com.dancosoft.socialcommunity.service.impl.CityServiceImpl">
		<beans:property name="cityDAO" ref="cityDAO"></beans:property>
	</beans:bean>
	
	<beans:bean id="countryService" class="com.dancosoft.socialcommunity.service.impl.CountryServiceImpl">
		<beans:property name="countryDAO" ref="countryDAO"></beans:property>
	</beans:bean>
	
	<beans:bean id="eventPatternService" class="com.dancosoft.socialcommunity.service.impl.EventPatternServiceImpl">
		<beans:property name="eventPatternDAO" ref="eventPatternDAO"></beans:property>
	</beans:bean>

	<beans:bean id="forumMessageService" class="com.dancosoft.socialcommunity.service.impl.ForumMessageServiceImpl">
		<beans:property name="forumMessageDAO" ref="forumMessageDAO"></beans:property>
	</beans:bean>

	<beans:bean id="forumService" class="com.dancosoft.socialcommunity.service.impl.ForumServiceImpl">
		<beans:property name="forumDAO" ref="forumDAO"></beans:property>
	</beans:bean>
	
	<beans:bean id="forumTopicService" class="com.dancosoft.socialcommunity.service.impl.ForumTopicServiceImpl">
		<beans:property name="forumTopicDAO" ref="forumTopicDAO"></beans:property>
	</beans:bean>
	
	<beans:bean id="groupEventService" class="com.dancosoft.socialcommunity.service.impl.GroupEventServiceImpl">
		<beans:property name="groupEventDAO" ref="groupEventDAO"></beans:property>
	</beans:bean>
	
	<beans:bean id="groupMemberService" class="com.dancosoft.socialcommunity.service.impl.GroupMemberServiceImpl">
		<beans:property name="groupMemberDAO" ref="groupMemberDAO"></beans:property>
	</beans:bean>
	
	<beans:bean id="groupMessageService" class="com.dancosoft.socialcommunity.service.impl.GroupMessageServiceImpl">
		<beans:property name="groupMessageDAO" ref="groupMessageDAO"></beans:property>
	</beans:bean>

	<beans:bean id="languageService" class="com.dancosoft.socialcommunity.service.impl.LanguageServiceImpl">
		<beans:property name="languageDAO" ref="languageDAO"></beans:property>
	</beans:bean>
	
	<beans:bean id="securityPromptService" class="com.dancosoft.socialcommunity.service.impl.SecurityPromptServiceImpl">
		<beans:property name="securityPromptDAO" ref="securityPromptDAO"></beans:property>
	</beans:bean>
	
	<beans:bean id="singleMessageService" class="com.dancosoft.socialcommunity.service.impl.SingleMessageServiceImpl">
		<beans:property name="singleMessageDAO" ref="singleMessageDAO"></beans:property>
	</beans:bean>
	
	<beans:bean id="userAutobiographyService" class="com.dancosoft.socialcommunity.service.impl.UserAutobiographyServiceImpl">
		<beans:property name="userAutobiographyDAO" ref="userAutobiographyDAO"></beans:property>
	</beans:bean>

	<beans:bean id="userCorespondenceService" class="com.dancosoft.socialcommunity.service.impl.UserCorespondenceServiceImpl">
		<beans:property name="userCorespondenceDAO" ref="userCorespondenceDAO"></beans:property>
	</beans:bean>
	
	<beans:bean id="userEmailService" class="com.dancosoft.socialcommunity.service.impl.UserEmailServiceImpl">
		<beans:property name="userEmailDAO" ref="userEmailDAO"></beans:property>
	</beans:bean>
	
	<beans:bean id="userLocationService" class="com.dancosoft.socialcommunity.service.impl.UserLocationServiceImpl">
		<beans:property name="userLocationDAO" ref="userLocationDAO"></beans:property>
	</beans:bean>
	
	<beans:bean id="userPhotoService" class="com.dancosoft.socialcommunity.service.impl.UserPhotoServiceImpl">
		<beans:property name="userPhotoDAO" ref="userPhotoDAO"></beans:property>
	</beans:bean>
	
	<beans:bean id="userRoleService" class="com.dancosoft.socialcommunity.service.impl.UserRoleServiceImpl">
		<beans:property name="userRoleDAO" ref="userRoleDAO"></beans:property>
	</beans:bean>
	
	<beans:bean id="userSecurityService" class="com.dancosoft.socialcommunity.service.impl.UserSecurityServiceImpl">
		<beans:property name="userSecurityDAO" ref="userSecurityDAO"></beans:property>
	</beans:bean>
	
	<beans:bean id="userService" class="com.dancosoft.socialcommunity.service.impl.UserServiceImpl">
		<beans:property name="userDAO" ref="userDAO"></beans:property>
	</beans:bean>

	<beans:bean id="userSocialNetworkService" class="com.dancosoft.socialcommunity.service.impl.UserSocialNetworkServiceImpl">
		<beans:property name="userSocialNetworkDAO" ref="userSocialNetworkDAO"></beans:property>
	</beans:bean>


	<beans:bean id="testObjectServcieCreator" class="com.dancosoft.socialcommunity.service.testsupport.TestObjectServiceCreator">
		<beans:property name="commonEntityDAO" ref="commonEntityDAO"/>
	</beans:bean>

	<context:annotation-config/>
	
	<context:component-scan base-package="com.dancosoft.socialcommunity">
		<context:include-filter type="regex" expression="com.dancosoft.socialcommunity.*"/>
		<context:include-filter type="regex" expression="com.dancosoft.socialcommunity.service.*"/>
	</context:component-scan>
	
</beans:beans>